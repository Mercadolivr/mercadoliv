(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2705],{68571:(e,t,r)=>{"use strict";r(44114);var a=r(16270),n=r(43693),o=r(91847),c=r(96540),i=r(5556),s=r(91496),l=r(72831);r(23792),r(26910),r(62953);var m=r(85735);r(27495),r(42762);var d=r(89557);r(74423),r(16280);var p=r(74848),u=r(13018),b=r(35421),_=r(43461),w=r(46942),f=r(79204);const h={MLA:{url:{mainDomain:"mercadolibre.com.ar",baseDomain:"//www.mercadolibre.com.ar"}},MPE:{url:{mainDomain:"mercadolibre.com.pe",baseDomain:"//www.mercadolibre.com.pe"}},MPT:{url:{mainDomain:"mercadolivre.pt",baseDomain:"//www.mercadolivre.pt"}},MRD:{url:{mainDomain:"mercadolibre.com.do",baseDomain:"//www.mercadolibre.com.do"}},MPA:{url:{mainDomain:"mercadolibre.com.pa",baseDomain:"//www.mercadolibre.com.pa"}},MEC:{url:{mainDomain:"mercadolibre.com.ec",baseDomain:"//www.mercadolibre.com.ec"}},MCR:{url:{mainDomain:"mercadolibre.co.cr",baseDomain:"//www.mercadolibre.co.cr"}},MLU:{url:{mainDomain:"mercadolibre.com.uy",baseDomain:"//www.mercadolibre.com.uy"}},MLM:{url:{mainDomain:"mercadolibre.com.mx",baseDomain:"//www.mercadolibre.com.mx"}},MLC:{url:{mainDomain:"mercadolibre.cl",baseDomain:"//www.mercadolibre.cl"}},MCO:{url:{mainDomain:"mercadolibre.com.co",baseDomain:"//www.mercadolibre.com.co"}},MLV:{url:{mainDomain:"mercadolibre.com.ve",baseDomain:"//www.mercadolibre.com.ve"}},MLB:{url:{mainDomain:"mercadolivre.com.br",baseDomain:"//www.mercadolivre.com.br"}},MBO:{url:{mainDomain:"mercadolibre.com.bo",baseDomain:"//www.mercadolibre.com.bo"}},MPY:{url:{mainDomain:"mercadolibre.com.py",baseDomain:"//www.mercadolibre.com.py"}},MGT:{url:{mainDomain:"mercadolibre.com.gt",baseDomain:"//www.mercadolibre.com.gt"}},MHN:{url:{mainDomain:"mercadolibre.com.hn",baseDomain:"//www.mercadolibre.com.hn"}},MNI:{url:{mainDomain:"mercadolibre.com.ni",baseDomain:"//www.mercadolibre.com.ni"}},MSV:{url:{mainDomain:"mercadolibre.com.sv",baseDomain:"//www.mercadolibre.com.sv"}},MCU:{url:{mainDomain:"mercadolibre.com.cu",baseDomain:"//www.mercadolibre.com.cu"}}};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const v=d({timeout:3e4,baseURL:"https://www.mercadolibre.com.ar",withCredentials:!0,sendCSRFToken:!1}),y={"x-card-type":"web","x-recosplugin-version":"###VERSION###"};class D{static getHostname(e){return"https:".concat(h[e.site_id].url.baseDomain)}static fetchRecommendations(e,t){const r=O(O({},y),t);return r["x-image-webp"]=!0,v.get("/product-fe-recommendations/recommendations",{params:e,headers:r,baseURL:this.getHostname(e)}).then((e=>e.data)).catch((()=>{}))}static getLab(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(t.env)e=t.env;else if(document&&document.cookie){const t=document.cookie.split(";").find((e=>"meliLab"===e.split("=")[0].trim()));if(t){const r=t.split("=")[1].trim();"recosreact"===r?e="test0":"recos"===r?e="test":"release"===r?e="testrelease":r.match(/recos-([0-9]*)/)&&(e="test".concat(r.split("-")[1]))}}}catch(e){console&&console.info("Recommendations - Cannot get lab info.",e)}return e}}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const j=e=>{let{props:t,componentRef:r,fetchDelay:a=0}=e;const n=c.useRef(!1),{isOnViewport:o,setIsOnViewport:i,observeElement:s}=m.useIntersectionObserver({externalRef:r,once:!0,startOff:!0});c.useEffect((()=>{n.current=o}),[o]);const[l,d]=c.useState([]);c.useEffect((()=>{t.apiResponse?d(t.apiResponse.recommendations):(e=>{let{clients:o}=e;const c=C({site_id:t.siteId,product_id:t.productId,tracking:!0,product_details:!0,env:D.getLab(t)},m.mapPropsToQuery({componentProps:t,paramsToMap:["pdp_filters"]}));d([]),o.forEach(((e,t)=>{D.fetchRecommendations(C(C({},c),{},{client:e})).then((o=>{setTimeout((()=>{d((a=>{i(!1),s({element:r.current});const c=[...a];return a.length>0&&n.current?m.TrackService.requestIgnored(e):c[t]=o,c}))}),a)})).catch((()=>{}))}))})({clients:t.clients})}),[t.productId]);const[p,u]=c.useState([]);return c.useEffect((()=>{if(l&&l.length>0){const e=l.filter((e=>{var t;return e&&e.attributes_list&&(null===(t=e.recommended_products)||void 0===t?void 0:t.length)>0}));if(!e||e.length<=0)return;const t=e.sort(((e,t)=>e.priority-t.priority));u(t)}}),[l]),{recommendations:p}},T="ANONYMOUS";i.shape({attributes_list:i.arrayOf(i.shape({id:i.string,title:i.string,type:i.string})),backend:i.shape({id:i.string,type:i.string}),client:i.string,site_id:i.string,labels:i.shape({this_product:i.string,see_product:i.string,more_details:i.string,less_details:i.string}),recommended_products:i.arrayOf(i.shape({domain_id:i.string,id:i.string,img_url:i.string,name:i.string,parent_id:i.string,permalink:i.string,product_details:function(e){if(!e)throw new Error("hashmapProptype must be called with a shape validator.");return function(e){function t(t,r,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T;return r[a]?e(r,a,n):t?new Error("Required `".concat(a,"` was not specified in `").concat(n,"`.")):null}const r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}((function(t,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;const n=t[r];if(n){if("object"!=typeof n)return new Error("".concat(r," hashmap should be an object in ").concat(a));const t=Object.values(n),o={hashmapValues:i.arrayOf(e)};i.checkPropTypes(o,{hashmapValues:t},r,a)}return null}))}(i.oneOfType([i.shape({count_reviews:i.number,rating_average:i.number,stars:i.number}),i.shape({value:i.number,currency_symbol:i.string,decimal_separator:i.string,thousand_separator:i.string}),i.shape({link:i.string,id:i.string,name:i.string}),i.shape({text:i.string})])),site_id:i.string,status:i.string,trigger:i.bool})),title:i.string,tracking:i.shape()});const I=["productId","env","apiResponse","fetchDelay"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const M=e=>{const t=t=>{let{productId:r,env:n=null,apiResponse:i=null,fetchDelay:d=0}=t,u=o(t,I);const b=c.useRef(),{recommendations:_}=j({props:P({productId:r,env:n,apiResponse:i},u),componentRef:b,fetchDelay:d}),{IconFactory:w}=u,{trackedOnViewClients:f,setTrackedOnViewClients:h}=function(){let{productId:e,recommendations:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[r,a]=c.useState([]),[n,o]=c.useState([]),{trackOnPrint:i}=m.useTrackOnPrint();return c.useEffect((()=>{o([]),a([])}),[e]),c.useEffect((()=>{t&&t.length>0&&t.forEach((e=>{const{client:t}=e;n.includes(t)||(i(e.tracking),o([...n,t]))}))}),[t]),{trackedOnViewClients:r,setTrackedOnViewClients:a,trackedOnPrintClients:n,setTrackedOnPrintClients:o}}({productId:r,recommendations:_}),g=c.useRef();return p.jsx("section",{ref:b,className:"".concat(l.namespaceComparator,"__wrapper-ref"),children:_.length>0&&p.jsxs(p.Fragment,{children:[a("h2",{className:"".concat(l.namespaceComparator,"__title")},void 0,_[0].title),1===_.length?a(e,{recommendations:_[0],productId:r,trackedOnViewClients:f,setTrackedOnViewClients:h,IconFactory:w}):a(s.Tabs,{},void 0,_.map((t=>a(s.Tab,{title:t.labels.tab,onClick:()=>{var e;(e=g)&&e.current&&(e.current.scrollLeft=0)}},t.priority.toString(),a(s.TabContent,{},void 0,p.jsx(e,{recommendations:t,productId:r,trackedOnViewClients:f,setTrackedOnViewClients:h,ref:g,IconFactory:w}))))))]})})};return t.displayName="\n  Comparator Container - ".concat(e.displayName||e.name||"WrappedComparator","\n  "),t};var R;const E="".concat(l.namespaceComparator,"__reviews"),S=e=>{let{amount:t,rating:r,IconFactory:n,stars:o}=e;const c=n("recommendations-star-empty","".concat(l.namespaceComparator,"__icon")),i=n("recommendations-star-half","".concat(l.namespaceComparator,"__icon")),s=n("recommendations-star-full","".concat(l.namespaceComparator,"__icon")),m=null!=o?o:r,d=Math.floor(m),u=Math.ceil(m-d),b=5-u-d,_=[];for(let e=0;e<d;e+=1)_.push(s);for(let e=0;e<u;e+=1)_.push(i);for(let e=0;e<b;e+=1)_.push(c);return a("div",{className:"".concat(E,"__label")},void 0,r?p.jsxs(p.Fragment,{children:[a("span",{className:"".concat(E,"__rating")},void 0,r.toFixed(1)),a("span",{className:"".concat(E,"__ratings")},void 0,_),a("span",{className:"".concat(E,"__amount")},void 0,"(","".concat(t),")")]}):a("span",{className:"".concat(E,"__no-rating")},void 0,"_"))},V="".concat(l.namespaceComparator,"__seller-info"),F=e=>{let{sellerInfo:t}=e;return t.link?a("a",{href:t.link,title:t.name,className:V},void 0,t.name):a("span",{},void 0,t.name)},x="".concat(l.namespaceComparator,"__price"),L=e=>{let{thousandSeparator:t,decimalSeparator:r,currencySymbol:n,value:o,isMobile:c}=e;const i=m.getFormattedIntFraction(o,t),s=m.getFormattedDecimalFraction(o);return a(_,{value:{fraction:i,cents:s},symbol:n,className:x,size:c?12:14,centsType:","===r?"comma":"dot"})},A=e=>{let{attribute:t,component:r,isMobile:n,IconFactory:o}=e;if(void 0===r)return a("div",{className:"".concat(l.namespaceComparator,"--no-attr")});switch(t){case"REVIEWS":return r.rating_average>5&&(r.rating_average=5),a(S,{rating:r.rating_average,amount:r.count_reviews,IconFactory:o,stars:r.stars});case"SELLER":return a(F,{sellerInfo:r});case"PRICE":return a(L,{decimalSeparator:r.decimal_separator,thousandSeparator:r.thousand_separator,currencySymbol:r.currency_symbol,value:r.value,isMobile:n});default:return a("span",{},void 0,r.text)}},H=e=>{let{recommendations:t,isMobile:r=!1,IconFactory:n}=e;const o="".concat(l.namespaceComparator,"__table"),c={products:t.recommended_products,attributes:t.attributes_list,labels:t.labels,isMobile:r,IconFactory:n};return t&&t.attributes_list&&t.recommended_products?a(u.Table,{className:o},void 0,(e=>{let{products:t,labels:r}=e;const n="".concat(l.namespaceComparator,"__table");return a(u.TableHead,{},void 0,a(u.TableHeader,{scope:"column",className:"".concat(n,"__header")},void 0,R||(R=a("div",{}))),t.map(((e,t)=>a(u.TableHeader,{scope:"column",align:"center",className:"".concat(n,"__header")},e.id,0===t?p.jsxs(p.Fragment,{children:[a("div",{},void 0,a(b.Image,{className:"".concat(n,"__header__image"),src:e.img_url,alt:e.name}),a("p",{className:"".concat(n,"__header__title")},void 0,e.name)),a("span",{className:"".concat(n,"__header__link__text no-action")},void 0,r.this_product)]}):p.jsxs(p.Fragment,{children:[a("a",{href:e.permalink,className:"".concat(n,"__header__link")},void 0,a(b.Image,{className:"".concat(n,"__header__image"),src:e.img_url,alt:e.name}),a("p",{className:"".concat(n,"__header__title")},void 0,e.name)),a("a",{href:e.permalink,className:"".concat(n,"__header__link__text")},void 0,r.see_product)]})))))})(c),(e=>{let{products:t,attributes:r,isMobile:n,IconFactory:o}=e;const c="".concat(l.namespaceComparator,"__table");return a(u.TableBody,{},void 0,r.map((e=>a(u.TableRow,{},e.id,a(u.TableHeader,{scope:"row",className:"".concat(c,"__body__column")},e.id,e.title),t.map((t=>a(u.TableData,{className:"".concat(c,"__body__column")},t.id,a(A,{attribute:e.id,component:t.product_details[e.id],isMobile:n,IconFactory:o}))))))))})(c)):null},B=(e=>{const t=c.forwardRef(((t,r)=>{let{recommendations:n,IconFactory:o}=t;const[i,s]=c.useState(!0),d="".concat(l.namespaceComparator,"__table"),u=2===n.recommended_products.length;return p.jsxs(p.Fragment,{children:[a("div",{className:w("".concat(d,"__shadow-container"),i&&"collapsed")},void 0,p.jsx("div",{className:w("".concat(d,"__container"),u&&"two-cols"),ref:r,children:a(e,{recommendations:n,IconFactory:o,isMobile:!0})})),i&&a(f.Button,{className:"table-button",hierarchy:"transparent",size:"small",onClick:()=>{s(!1),m.TrackService.clickMore(n.tracking)}},void 0,a(f.ButtonText,{},void 0,n.labels.more_details),o("recommendations-chevron","".concat(l.namespaceComparator,"__icon chevron-down")))]})}));return t.displayName="\n  Collapsible Table - ".concat(e.displayName||e.name||"WrappedTable","\n  "),t})(H),U=c.forwardRef(((e,t)=>{let{recommendations:r,trackedOnViewClients:a=[],setTrackedOnViewClients:n=null,IconFactory:o}=e;const i=c.useRef();return m.useTrackOnView({componentRef:i,trackData:r.tracking,client:r.client,trackedOnViewClients:a,setTrackedOnViewClients:n,shouldTrackOnView:!0}),p.jsx("section",{id:r.client,ref:i,className:l.namespaceComparator,children:p.jsx(B,{recommendations:r,ref:t,IconFactory:o})})})),q=M((e=>{let{recommendations:t,trackedOnViewClients:r=[],setTrackedOnViewClients:n=null,IconFactory:o}=e;const i=c.useRef();return m.useTrackOnView({componentRef:i,trackData:t.tracking,client:t.client,trackedOnViewClients:r,setTrackedOnViewClients:n,shouldTrackOnView:!0}),p.jsx("section",{id:t.client,ref:i,className:l.namespaceComparator,children:a(H,{recommendations:t,IconFactory:o})})})),W=M(U);t.RecommendationsComparatorDesktop=q,t.RecommendationsComparatorMobile=W},22705:(e,t,r)=>{e.exports=r(68571)}}]);
//# sourceMappingURL=2705.69e029f0.js.map